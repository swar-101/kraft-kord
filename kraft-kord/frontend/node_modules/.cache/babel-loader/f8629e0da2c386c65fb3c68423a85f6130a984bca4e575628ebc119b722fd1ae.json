{"ast":null,"code":"var _jsxFileName = \"/home/swar/projects/kraftKord/kraft-kord/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { saveAs } from 'file-saver';\nimport * as Tone from 'tone';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst moods = {\n  Dreamy: ['Cmaj7', 'Am9', 'Fmaj7', 'G13'],\n  Sad: ['Dm', 'Gm', 'Bb', 'A7'],\n  Energetic: ['E', 'A', 'C#m', 'B'],\n  'Deep House': ['G#m9', 'Badd9', 'Emaj9', 'C#m9'],\n  'Ambient': ['Dmaj9', 'Bm7', 'Gmaj7', 'Em9'],\n  'Jazz': ['Dm7', 'G7', 'Cmaj7', 'A7'],\n  'Blues': ['A7', 'D7', 'E7', 'A7'],\n  'Cinematic': ['Em', 'C', 'G', 'D'],\n  'Lo-Fi': ['Fmaj7', 'Dm7', 'Bb7', 'C7'],\n  'Neo-Soul': ['F#m7', 'Bmaj7', 'E7', 'Amaj7']\n};\nconst instruments = {\n  'Grand Piano': {\n    type: 'sampler',\n    settings: {\n      urls: {\n        A0: \"A0.mp3\",\n        C1: \"C1.mp3\",\n        \"D#1\": \"Ds1.mp3\",\n        \"F#1\": \"Fs1.mp3\",\n        A1: \"A1.mp3\",\n        C2: \"C2.mp3\",\n        \"D#2\": \"Ds2.mp3\",\n        \"F#2\": \"Fs2.mp3\",\n        A2: \"A2.mp3\",\n        C3: \"C3.mp3\",\n        \"D#3\": \"Ds3.mp3\",\n        \"F#3\": \"Fs3.mp3\",\n        A3: \"A3.mp3\",\n        C4: \"C4.mp3\",\n        \"D#4\": \"Ds4.mp3\",\n        \"F#4\": \"Fs4.mp3\",\n        A4: \"A4.mp3\",\n        C5: \"C5.mp3\",\n        \"D#5\": \"Ds5.mp3\",\n        \"F#5\": \"Fs5.mp3\",\n        A5: \"A5.mp3\",\n        C6: \"C6.mp3\",\n        \"D#6\": \"Ds6.mp3\",\n        \"F#6\": \"Fs6.mp3\",\n        A6: \"A6.mp3\",\n        C7: \"C7.mp3\",\n        \"D#7\": \"Ds7.mp3\",\n        \"F#7\": \"Fs7.mp3\",\n        A7: \"A7.mp3\",\n        C8: \"C8.mp3\"\n      },\n      release: 1,\n      baseUrl: \"https://tonejs.github.io/audio/salamander/\"\n    }\n  },\n  'Strings': {\n    type: 'synth',\n    settings: {\n      oscillator: {\n        type: \"sine\",\n        modulationType: \"sine\",\n        modulationIndex: 0.2,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 1.5,\n        decay: 0.5,\n        sustain: 0.4,\n        release: 2\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 800,\n        rolloff: -24,\n        Q: 0.5\n      },\n      volume: -12\n    },\n    effects: [{\n      type: \"compressor\",\n      threshold: -24,\n      ratio: 4,\n      attack: 0.1,\n      release: 0.2\n    }, {\n      type: \"eq3\",\n      low: 2,\n      mid: -4,\n      high: -8,\n      lowFrequency: 200,\n      highFrequency: 2000\n    }]\n  },\n  'Electric': {\n    type: 'synth',\n    settings: {\n      oscillator: {\n        type: \"sawtooth\",\n        modulationType: \"square\",\n        modulationIndex: 0.3,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 0.1,\n        decay: 0.3,\n        sustain: 0.3,\n        release: 1\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 600,\n        rolloff: -24,\n        Q: 1\n      },\n      filterEnvelope: {\n        attack: 0.2,\n        decay: 0.3,\n        sustain: 0.4,\n        release: 1,\n        baseFrequency: 200,\n        octaves: 1.5\n      },\n      volume: -10\n    },\n    effects: [{\n      type: \"compressor\",\n      threshold: -20,\n      ratio: 6,\n      attack: 0.1,\n      release: 0.2\n    }, {\n      type: \"eq3\",\n      low: 4,\n      mid: -2,\n      high: -6,\n      lowFrequency: 150,\n      highFrequency: 1500\n    }]\n  },\n  'Synth': {\n    type: 'synth',\n    settings: {\n      oscillator: {\n        type: \"triangle\",\n        modulationType: \"sine\",\n        modulationIndex: 0.4,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 0.2,\n        decay: 0.4,\n        sustain: 0.3,\n        release: 1.5\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 400,\n        rolloff: -24,\n        Q: 0.8\n      },\n      filterEnvelope: {\n        attack: 0.2,\n        decay: 0.3,\n        sustain: 0.4,\n        release: 1,\n        baseFrequency: 150,\n        octaves: 2\n      },\n      volume: -8\n    },\n    effects: [{\n      type: \"compressor\",\n      threshold: -18,\n      ratio: 8,\n      attack: 0.1,\n      release: 0.2\n    }, {\n      type: \"eq3\",\n      low: 6,\n      mid: -4,\n      high: -4,\n      lowFrequency: 100,\n      highFrequency: 1000\n    }]\n  },\n  'Pad': {\n    type: 'synth',\n    settings: {\n      oscillator: {\n        type: \"sine\",\n        modulationType: \"sine\",\n        modulationIndex: 0.3,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 2,\n        decay: 1,\n        sustain: 0.6,\n        release: 3\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 500,\n        rolloff: -24,\n        Q: 0.5\n      },\n      filterEnvelope: {\n        attack: 1,\n        decay: 0.5,\n        sustain: 0.3,\n        release: 2,\n        baseFrequency: 200,\n        octaves: 2\n      },\n      volume: -12\n    },\n    effects: [{\n      type: \"compressor\",\n      threshold: -24,\n      ratio: 4,\n      attack: 0.1,\n      release: 0.2\n    }, {\n      type: \"eq3\",\n      low: 4,\n      mid: -2,\n      high: -4,\n      lowFrequency: 200,\n      highFrequency: 2000\n    }]\n  }\n};\n\n// Using MIDI note numbers for preview functionality\nconst chordLibrary = {\n  Cmaj7: [60, 64, 67, 71],\n  // C4, E4, G4, B4\n  Am9: [57, 60, 64, 69],\n  // A3, C4, E4, G4\n  Fmaj7: [53, 57, 60, 64],\n  // F3, A3, C4, E4\n  G13: [55, 59, 62, 67],\n  // G3, B3, D4, E4\n  Dm: [50, 53, 57],\n  // D3, F3, A3\n  Gm: [55, 58, 62],\n  // G3, Bb3, D4\n  Bb: [58, 62, 65],\n  // Bb3, D4, F4\n  A7: [57, 61, 64, 69],\n  // A3, C#4, E4, G4\n  E: [52, 56, 59],\n  // E3, G#3, B3\n  A: [57, 61, 64],\n  // A3, C#4, E4\n  'C#m': [61, 64, 68],\n  // C#4, E4, G#4\n  B: [59, 63, 66],\n  // B3, D#4, F#4\n  'G#m9': [56, 59, 63, 68],\n  // G#3, B3, D#4, F#4\n  Badd9: [59, 63, 66, 71],\n  // B3, D#4, F#4, C#5\n  Emaj9: [52, 56, 59, 66],\n  // E3, G#3, B3, D#4\n  'C#m9': [61, 64, 68, 73],\n  // C#4, E4, G#4, B4\n  Dmaj9: [50, 54, 57, 64],\n  // D3, F#3, A3, E4\n  Bm7: [59, 62, 66, 69],\n  // B3, D4, F#4, A4\n  Gmaj7: [55, 59, 62, 66],\n  // G3, B3, D4, F#4\n  Em9: [52, 55, 59, 64],\n  // E3, G3, B3, D4\n  Dm7: [50, 53, 57, 60],\n  // D3, F3, A3, C4\n  G7: [55, 59, 62, 65],\n  // G3, B3, D4, F4\n  D7: [50, 54, 57, 60],\n  // D3, F#3, A3, C4\n  E7: [52, 56, 59, 62],\n  // E3, G#3, B3, D4\n  'F#m7': [54, 57, 61, 64],\n  // F#3, A3, C#4, E4\n  Bmaj7: [59, 63, 66, 70],\n  // B3, D#4, F#4, A#4\n  Amaj7: [57, 61, 64, 68],\n  // A3, C#4, E4, G#4\n  Fmaj7: [53, 57, 60, 64],\n  // F3, A3, C4, E4\n  Dm7: [50, 53, 57, 60],\n  // D3, F3, A3, C4\n  Bb7: [58, 62, 65, 68],\n  // Bb3, D4, F4, Ab4\n  C7: [60, 64, 67, 70] // C4, E4, G4, Bb4\n};\nfunction App() {\n  _s();\n  const [mood, setMood] = useState('Dreamy');\n  const [instrument, setInstrument] = useState('Grand Piano');\n  const [synth, setSynth] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  useEffect(() => {\n    const setupInstrument = async () => {\n      if (synth) {\n        synth.dispose();\n      }\n      const currentInstrument = instruments[instrument];\n      let newSynth;\n      if (currentInstrument.type === 'sampler') {\n        newSynth = new Tone.Sampler(currentInstrument.settings);\n      } else {\n        newSynth = new Tone.PolySynth(Tone.Synth, currentInstrument.settings);\n      }\n\n      // Create reverb\n      const reverb = new Tone.Reverb({\n        decay: 2.5,\n        wet: 0.3\n      }).toDestination();\n\n      // Create effects chain\n      const effects = [];\n      if (currentInstrument.effects) {\n        currentInstrument.effects.forEach(effect => {\n          let effectNode;\n          switch (effect.type) {\n            case \"compressor\":\n              effectNode = new Tone.Compressor(effect);\n              break;\n            case \"eq3\":\n              effectNode = new Tone.EQ3(effect);\n              break;\n          }\n          if (effectNode) {\n            effects.push(effectNode);\n          }\n        });\n      }\n\n      // Connect the chain: synth -> effects -> reverb -> destination\n      let lastNode = newSynth;\n      effects.forEach(effect => {\n        lastNode.connect(effect);\n        lastNode = effect;\n      });\n      lastNode.connect(reverb);\n      setSynth(newSynth);\n      return () => {\n        newSynth.dispose();\n        reverb.dispose();\n        effects.forEach(effect => effect.dispose());\n      };\n    };\n    setupInstrument();\n  }, [instrument]);\n  const playProgression = async () => {\n    if (isPlaying) return;\n    setIsPlaying(true);\n    await Tone.start();\n\n    // Clear any existing scheduled events\n    Tone.Transport.cancel();\n\n    // Schedule all chords\n    moods[mood].forEach((chordName, index) => {\n      const time = index; // Each chord starts at its index (in beats)\n\n      // Schedule the chord\n      Tone.Transport.scheduleOnce(() => {\n        const notes = chordLibrary[chordName] || [];\n\n        // Convert MIDI numbers to note names\n        const noteNames = notes.map(note => {\n          const octave = Math.floor(note / 12) - 1;\n          const noteNames = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n          const noteName = noteNames[note % 12];\n          return `${noteName}${octave}`;\n        });\n        if (noteNames.length > 0) {\n          // Get the root note (first note of the chord) and play it an octave lower\n          const rootNote = noteNames[0];\n          const bassNote = rootNote.replace(/\\d+/, match => parseInt(match) - 1);\n\n          // Play the bass note with lower velocity for subtlety\n          synth.triggerAttackRelease(bassNote, \"1n\", Tone.now(), 0.5);\n\n          // Play the full chord\n          synth.triggerAttackRelease(noteNames, \"1n\");\n        }\n      }, time);\n    });\n\n    // Start the transport\n    Tone.Transport.start();\n\n    // Stop after all chords have played\n    const totalDuration = moods[mood].length;\n    setTimeout(() => {\n      Tone.Transport.stop();\n      setIsPlaying(false);\n    }, totalDuration * 1000);\n  };\n  const generateMidi = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/generate-midi', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          mood: mood,\n          chords: moods[mood]\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Failed to generate MIDI');\n      }\n      const data = await response.json();\n\n      // Convert the data directly to a blob since it's already in the correct format\n      const byteArray = new Uint8Array(data.data);\n      const blob = new Blob([byteArray], {\n        type: 'audio/midi'\n      });\n\n      // Save the file\n      saveAs(blob, data.filename);\n    } catch (error) {\n      console.error('Error generating MIDI:', error);\n      alert('Failed to generate MIDI file. Please make sure the backend server is running.');\n    }\n  };\n  useEffect(() => {\n    const handleKeyPress = e => {\n      if (e.code === 'Space' && !isPlaying) {\n        e.preventDefault();\n        playProgression();\n      }\n    };\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [isPlaying, playProgression]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"title\",\n      children: \"Kraft Kord\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"palette-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Mood\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"palette\",\n        children: Object.keys(moods).map(m => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `palette-item ${mood === m ? 'active' : ''}`,\n          onClick: () => setMood(m),\n          children: m\n        }, m, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"palette-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Sound\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"palette\",\n        children: Object.keys(instruments).map(i => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `palette-item ${instrument === i ? 'active' : ''}`,\n          onClick: () => setInstrument(i),\n          children: i\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `play-button ${isPlaying ? 'inactive' : ''}`,\n        onClick: playProgression,\n        disabled: isPlaying,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-symbols-outlined\",\n          children: \"hearing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `download-button ${isPlaying ? 'inactive' : ''}`,\n        onClick: generateMidi,\n        disabled: isPlaying,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-symbols-outlined\",\n          children: \"file_download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 422,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"+kru8V5kVkY5IoOKRBfx4PK/n54=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","saveAs","Tone","jsxDEV","_jsxDEV","moods","Dreamy","Sad","Energetic","instruments","type","settings","urls","A0","C1","A1","C2","A2","C3","A3","C4","A4","C5","A5","C6","A6","C7","A7","C8","release","baseUrl","oscillator","modulationType","modulationIndex","harmonicity","envelope","attack","decay","sustain","filter","frequency","rolloff","Q","volume","effects","threshold","ratio","low","mid","high","lowFrequency","highFrequency","filterEnvelope","baseFrequency","octaves","chordLibrary","Cmaj7","Am9","Fmaj7","G13","Dm","Gm","Bb","E","A","B","Badd9","Emaj9","Dmaj9","Bm7","Gmaj7","Em9","Dm7","G7","D7","E7","Bmaj7","Amaj7","Bb7","App","_s","mood","setMood","instrument","setInstrument","synth","setSynth","isPlaying","setIsPlaying","setupInstrument","dispose","currentInstrument","newSynth","Sampler","PolySynth","Synth","reverb","Reverb","wet","toDestination","forEach","effect","effectNode","Compressor","EQ3","push","lastNode","connect","playProgression","start","Transport","cancel","chordName","index","time","scheduleOnce","notes","noteNames","map","note","octave","Math","floor","noteName","length","rootNote","bassNote","replace","match","parseInt","triggerAttackRelease","now","totalDuration","setTimeout","stop","generateMidi","response","fetch","method","headers","body","JSON","stringify","chords","ok","Error","data","json","byteArray","Uint8Array","blob","Blob","filename","error","console","alert","handleKeyPress","e","code","preventDefault","window","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","keys","m","onClick","i","disabled","_c","$RefreshReg$"],"sources":["/home/swar/projects/kraftKord/kraft-kord/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { saveAs } from 'file-saver';\nimport * as Tone from 'tone';\nimport './App.css';\n\nconst moods = {\n  Dreamy: ['Cmaj7', 'Am9', 'Fmaj7', 'G13'],\n  Sad: ['Dm', 'Gm', 'Bb', 'A7'],\n  Energetic: ['E', 'A', 'C#m', 'B'],\n  'Deep House': ['G#m9', 'Badd9', 'Emaj9', 'C#m9'],\n  'Ambient': ['Dmaj9', 'Bm7', 'Gmaj7', 'Em9'],\n  'Jazz': ['Dm7', 'G7', 'Cmaj7', 'A7'],\n  'Blues': ['A7', 'D7', 'E7', 'A7'],\n  'Cinematic': ['Em', 'C', 'G', 'D'],\n  'Lo-Fi': ['Fmaj7', 'Dm7', 'Bb7', 'C7'],\n  'Neo-Soul': ['F#m7', 'Bmaj7', 'E7', 'Amaj7']\n};\n\nconst instruments = {\n  'Grand Piano': {\n    type: 'sampler',\n    settings: {\n      urls: {\n        A0: \"A0.mp3\", C1: \"C1.mp3\", \"D#1\": \"Ds1.mp3\", \"F#1\": \"Fs1.mp3\",\n        A1: \"A1.mp3\", C2: \"C2.mp3\", \"D#2\": \"Ds2.mp3\", \"F#2\": \"Fs2.mp3\",\n        A2: \"A2.mp3\", C3: \"C3.mp3\", \"D#3\": \"Ds3.mp3\", \"F#3\": \"Fs3.mp3\",\n        A3: \"A3.mp3\", C4: \"C4.mp3\", \"D#4\": \"Ds4.mp3\", \"F#4\": \"Fs4.mp3\",\n        A4: \"A4.mp3\", C5: \"C5.mp3\", \"D#5\": \"Ds5.mp3\", \"F#5\": \"Fs5.mp3\",\n        A5: \"A5.mp3\", C6: \"C6.mp3\", \"D#6\": \"Ds6.mp3\", \"F#6\": \"Fs6.mp3\",\n        A6: \"A6.mp3\", C7: \"C7.mp3\", \"D#7\": \"Ds7.mp3\", \"F#7\": \"Fs7.mp3\",\n        A7: \"A7.mp3\", C8: \"C8.mp3\"\n      },\n      release: 1,\n      baseUrl: \"https://tonejs.github.io/audio/salamander/\"\n    }\n  },\n  'Strings': {\n    type: 'synth',\n    settings: {\n      oscillator: { \n        type: \"sine\",\n        modulationType: \"sine\",\n        modulationIndex: 0.2,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 1.5,\n        decay: 0.5,\n        sustain: 0.4,\n        release: 2\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 800,\n        rolloff: -24,\n        Q: 0.5\n      },\n      volume: -12\n    },\n    effects: [\n      {\n        type: \"compressor\",\n        threshold: -24,\n        ratio: 4,\n        attack: 0.1,\n        release: 0.2\n      },\n      {\n        type: \"eq3\",\n        low: 2,\n        mid: -4,\n        high: -8,\n        lowFrequency: 200,\n        highFrequency: 2000\n      }\n    ]\n  },\n  'Electric': {\n    type: 'synth',\n    settings: {\n      oscillator: { \n        type: \"sawtooth\",\n        modulationType: \"square\",\n        modulationIndex: 0.3,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 0.1,\n        decay: 0.3,\n        sustain: 0.3,\n        release: 1\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 600,\n        rolloff: -24,\n        Q: 1\n      },\n      filterEnvelope: {\n        attack: 0.2,\n        decay: 0.3,\n        sustain: 0.4,\n        release: 1,\n        baseFrequency: 200,\n        octaves: 1.5\n      },\n      volume: -10\n    },\n    effects: [\n      {\n        type: \"compressor\",\n        threshold: -20,\n        ratio: 6,\n        attack: 0.1,\n        release: 0.2\n      },\n      {\n        type: \"eq3\",\n        low: 4,\n        mid: -2,\n        high: -6,\n        lowFrequency: 150,\n        highFrequency: 1500\n      }\n    ]\n  },\n  'Synth': {\n    type: 'synth',\n    settings: {\n      oscillator: { \n        type: \"triangle\",\n        modulationType: \"sine\",\n        modulationIndex: 0.4,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 0.2,\n        decay: 0.4,\n        sustain: 0.3,\n        release: 1.5\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 400,\n        rolloff: -24,\n        Q: 0.8\n      },\n      filterEnvelope: {\n        attack: 0.2,\n        decay: 0.3,\n        sustain: 0.4,\n        release: 1,\n        baseFrequency: 150,\n        octaves: 2\n      },\n      volume: -8\n    },\n    effects: [\n      {\n        type: \"compressor\",\n        threshold: -18,\n        ratio: 8,\n        attack: 0.1,\n        release: 0.2\n      },\n      {\n        type: \"eq3\",\n        low: 6,\n        mid: -4,\n        high: -4,\n        lowFrequency: 100,\n        highFrequency: 1000\n      }\n    ]\n  },\n  'Pad': {\n    type: 'synth',\n    settings: {\n      oscillator: { \n        type: \"sine\",\n        modulationType: \"sine\",\n        modulationIndex: 0.3,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 2,\n        decay: 1,\n        sustain: 0.6,\n        release: 3\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 500,\n        rolloff: -24,\n        Q: 0.5\n      },\n      filterEnvelope: {\n        attack: 1,\n        decay: 0.5,\n        sustain: 0.3,\n        release: 2,\n        baseFrequency: 200,\n        octaves: 2\n      },\n      volume: -12\n    },\n    effects: [\n      {\n        type: \"compressor\",\n        threshold: -24,\n        ratio: 4,\n        attack: 0.1,\n        release: 0.2\n      },\n      {\n        type: \"eq3\",\n        low: 4,\n        mid: -2,\n        high: -4,\n        lowFrequency: 200,\n        highFrequency: 2000\n      }\n    ]\n  }\n};\n\n// Using MIDI note numbers for preview functionality\nconst chordLibrary = {\n  Cmaj7: [60, 64, 67, 71],  // C4, E4, G4, B4\n  Am9: [57, 60, 64, 69],    // A3, C4, E4, G4\n  Fmaj7: [53, 57, 60, 64],  // F3, A3, C4, E4\n  G13: [55, 59, 62, 67],    // G3, B3, D4, E4\n  Dm: [50, 53, 57],         // D3, F3, A3\n  Gm: [55, 58, 62],         // G3, Bb3, D4\n  Bb: [58, 62, 65],         // Bb3, D4, F4\n  A7: [57, 61, 64, 69],     // A3, C#4, E4, G4\n  E: [52, 56, 59],          // E3, G#3, B3\n  A: [57, 61, 64],          // A3, C#4, E4\n  'C#m': [61, 64, 68],      // C#4, E4, G#4\n  B: [59, 63, 66],          // B3, D#4, F#4\n  'G#m9': [56, 59, 63, 68], // G#3, B3, D#4, F#4\n  Badd9: [59, 63, 66, 71],  // B3, D#4, F#4, C#5\n  Emaj9: [52, 56, 59, 66],  // E3, G#3, B3, D#4\n  'C#m9': [61, 64, 68, 73], // C#4, E4, G#4, B4\n  Dmaj9: [50, 54, 57, 64],  // D3, F#3, A3, E4\n  Bm7: [59, 62, 66, 69],    // B3, D4, F#4, A4\n  Gmaj7: [55, 59, 62, 66],  // G3, B3, D4, F#4\n  Em9: [52, 55, 59, 64],    // E3, G3, B3, D4\n  Dm7: [50, 53, 57, 60],    // D3, F3, A3, C4\n  G7: [55, 59, 62, 65],     // G3, B3, D4, F4\n  D7: [50, 54, 57, 60],     // D3, F#3, A3, C4\n  E7: [52, 56, 59, 62],     // E3, G#3, B3, D4\n  'F#m7': [54, 57, 61, 64],   // F#3, A3, C#4, E4\n  Bmaj7: [59, 63, 66, 70],  // B3, D#4, F#4, A#4\n  Amaj7: [57, 61, 64, 68],  // A3, C#4, E4, G#4\n  Fmaj7: [53, 57, 60, 64],  // F3, A3, C4, E4\n  Dm7: [50, 53, 57, 60],    // D3, F3, A3, C4\n  Bb7: [58, 62, 65, 68],    // Bb3, D4, F4, Ab4\n  C7: [60, 64, 67, 70]      // C4, E4, G4, Bb4\n};\n\nfunction App() {\n  const [mood, setMood] = useState('Dreamy');\n  const [instrument, setInstrument] = useState('Grand Piano');\n  const [synth, setSynth] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  useEffect(() => {\n    const setupInstrument = async () => {\n      if (synth) {\n        synth.dispose();\n      }\n\n      const currentInstrument = instruments[instrument];\n      let newSynth;\n\n      if (currentInstrument.type === 'sampler') {\n        newSynth = new Tone.Sampler(currentInstrument.settings);\n      } else {\n        newSynth = new Tone.PolySynth(Tone.Synth, currentInstrument.settings);\n      }\n\n      // Create reverb\n      const reverb = new Tone.Reverb({\n        decay: 2.5,\n        wet: 0.3\n      }).toDestination();\n\n      // Create effects chain\n      const effects = [];\n      if (currentInstrument.effects) {\n        currentInstrument.effects.forEach(effect => {\n          let effectNode;\n          switch (effect.type) {\n            case \"compressor\":\n              effectNode = new Tone.Compressor(effect);\n              break;\n            case \"eq3\":\n              effectNode = new Tone.EQ3(effect);\n              break;\n          }\n          if (effectNode) {\n            effects.push(effectNode);\n          }\n        });\n      }\n\n      // Connect the chain: synth -> effects -> reverb -> destination\n      let lastNode = newSynth;\n      effects.forEach(effect => {\n        lastNode.connect(effect);\n        lastNode = effect;\n      });\n      lastNode.connect(reverb);\n\n      setSynth(newSynth);\n\n      return () => {\n        newSynth.dispose();\n        reverb.dispose();\n        effects.forEach(effect => effect.dispose());\n      };\n    };\n\n    setupInstrument();\n  }, [instrument]);\n\n  const playProgression = async () => {\n    if (isPlaying) return;\n    \n    setIsPlaying(true);\n    await Tone.start();\n    \n    // Clear any existing scheduled events\n    Tone.Transport.cancel();\n    \n    // Schedule all chords\n    moods[mood].forEach((chordName, index) => {\n      const time = index; // Each chord starts at its index (in beats)\n      \n      // Schedule the chord\n      Tone.Transport.scheduleOnce(() => {\n        const notes = chordLibrary[chordName] || [];\n        \n        // Convert MIDI numbers to note names\n        const noteNames = notes.map(note => {\n          const octave = Math.floor(note / 12) - 1;\n          const noteNames = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n          const noteName = noteNames[note % 12];\n          return `${noteName}${octave}`;\n        });\n        \n        if (noteNames.length > 0) {\n          // Get the root note (first note of the chord) and play it an octave lower\n          const rootNote = noteNames[0];\n          const bassNote = rootNote.replace(/\\d+/, (match) => parseInt(match) - 1);\n          \n          // Play the bass note with lower velocity for subtlety\n          synth.triggerAttackRelease(bassNote, \"1n\", Tone.now(), 0.5);\n          \n          // Play the full chord\n          synth.triggerAttackRelease(noteNames, \"1n\");\n        }\n      }, time);\n    });\n    \n    // Start the transport\n    Tone.Transport.start();\n    \n    // Stop after all chords have played\n    const totalDuration = moods[mood].length;\n    setTimeout(() => {\n      Tone.Transport.stop();\n      setIsPlaying(false);\n    }, totalDuration * 1000);\n  };\n\n  const generateMidi = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/generate-midi', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          mood: mood,\n          chords: moods[mood]\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to generate MIDI');\n      }\n\n      const data = await response.json();\n      \n      // Convert the data directly to a blob since it's already in the correct format\n      const byteArray = new Uint8Array(data.data);\n      const blob = new Blob([byteArray], { type: 'audio/midi' });\n      \n      // Save the file\n      saveAs(blob, data.filename);\n    } catch (error) {\n      console.error('Error generating MIDI:', error);\n      alert('Failed to generate MIDI file. Please make sure the backend server is running.');\n    }\n  };\n\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      if (e.code === 'Space' && !isPlaying) {\n        e.preventDefault();\n        playProgression();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [isPlaying, playProgression]);\n\n  return (\n    <div className=\"app-container\">\n      <h1 className=\"title\">Kraft Kord</h1>\n\n      <div className=\"palette-container\">\n        <h2>Mood</h2>\n        <div className=\"palette\">\n          {Object.keys(moods).map(m => (\n            <button\n              key={m}\n              className={`palette-item ${mood === m ? 'active' : ''}`}\n              onClick={() => setMood(m)}\n            >\n              {m}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"palette-container\">\n        <h2>Sound</h2>\n        <div className=\"palette\">\n          {Object.keys(instruments).map(i => (\n            <button\n              key={i}\n              className={`palette-item ${instrument === i ? 'active' : ''}`}\n              onClick={() => setInstrument(i)}\n            >\n              {i}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"button-group\">\n        <button \n          className={`play-button ${isPlaying ? 'inactive' : ''}`}\n          onClick={playProgression}\n          disabled={isPlaying}\n        >\n          <span className=\"material-symbols-outlined\">hearing</span>\n        </button>\n        <button \n          className={`download-button ${isPlaying ? 'inactive' : ''}`}\n          onClick={generateMidi}\n          disabled={isPlaying}\n        >\n          <span className=\"material-symbols-outlined\">file_download</span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}