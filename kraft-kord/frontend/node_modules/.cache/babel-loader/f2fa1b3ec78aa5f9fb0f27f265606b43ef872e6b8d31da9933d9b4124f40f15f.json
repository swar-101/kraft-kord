{"ast":null,"code":"var _jsxFileName = \"/home/swar/projects/kraftKord/kraft-kord/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { saveAs } from 'file-saver';\nimport * as Tone from 'tone';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst moods = {\n  Dreamy: [['Cmaj7', 'Am9', 'Fmaj7', 'G13'], ['Dmaj9', 'Bm7', 'Gmaj7', 'Em9'], ['Fmaj7', 'Dm7', 'Bb7', 'C7']],\n  Sad: [['Dm', 'Gm', 'Bb', 'A7'], ['Em', 'Am', 'C', 'G'], ['Bm', 'F#m', 'G', 'A']],\n  Energetic: [['E', 'A', 'C#m', 'B'], ['G', 'C', 'D', 'Em'], ['A', 'D', 'E', 'F#m']],\n  'Deep House': [['G#m9', 'Badd9', 'Emaj9', 'C#m9'], ['F#m7', 'Bmaj7', 'E7', 'Amaj7'], ['Dm7', 'G7', 'Cmaj7', 'A7']],\n  'Ambient': [['Dmaj9', 'Bm7', 'Gmaj7', 'Em9'], ['Am7', 'Dm7', 'Gmaj7', 'Cmaj7'], ['Em9', 'Bm7', 'Amaj7', 'F#m7']],\n  'Jazz': [['Dm7', 'G7', 'Cmaj7', 'A7'], ['Em7', 'A7', 'Dmaj7', 'B7'], ['Fm7', 'Bb7', 'Ebmaj7', 'C7']],\n  'Blues': [['A7', 'D7', 'E7', 'A7'], ['C7', 'F7', 'G7', 'C7'], ['E7', 'A7', 'B7', 'E7']],\n  'Cinematic': [['Em', 'C', 'G', 'D'], ['Am', 'F', 'C', 'G'], ['Dm', 'Bb', 'F', 'C']],\n  'Lo-Fi': [['Fmaj7', 'Dm7', 'Bb7', 'C7'], ['Am7', 'Fmaj7', 'Dm7', 'E7'], ['Gmaj7', 'Em7', 'Am7', 'D7']],\n  'Neo-Soul': [['F#m7', 'Bmaj7', 'E7', 'Amaj7'], ['Dm7', 'G7', 'Cmaj7', 'Fmaj7'], ['Am7', 'D7', 'Gmaj7', 'C7']]\n};\nconst instruments = {\n  'Grand Piano': {\n    type: 'sampler',\n    settings: {\n      urls: {\n        A0: \"A0.mp3\",\n        C1: \"C1.mp3\",\n        \"D#1\": \"Ds1.mp3\",\n        \"F#1\": \"Fs1.mp3\",\n        A1: \"A1.mp3\",\n        C2: \"C2.mp3\",\n        \"D#2\": \"Ds2.mp3\",\n        \"F#2\": \"Fs2.mp3\",\n        A2: \"A2.mp3\",\n        C3: \"C3.mp3\",\n        \"D#3\": \"Ds3.mp3\",\n        \"F#3\": \"Fs3.mp3\",\n        A3: \"A3.mp3\",\n        C4: \"C4.mp3\",\n        \"D#4\": \"Ds4.mp3\",\n        \"F#4\": \"Fs4.mp3\",\n        A4: \"A4.mp3\",\n        C5: \"C5.mp3\",\n        \"D#5\": \"Ds5.mp3\",\n        \"F#5\": \"Fs5.mp3\",\n        A5: \"A5.mp3\",\n        C6: \"C6.mp3\",\n        \"D#6\": \"Ds6.mp3\",\n        \"F#6\": \"Fs6.mp3\",\n        A6: \"A6.mp3\",\n        C7: \"C7.mp3\",\n        \"D#7\": \"Ds7.mp3\",\n        \"F#7\": \"Fs7.mp3\",\n        A7: \"A7.mp3\",\n        C8: \"C8.mp3\"\n      },\n      release: 1,\n      baseUrl: \"https://tonejs.github.io/audio/salamander/\"\n    }\n  },\n  'Strings': {\n    type: 'synth',\n    settings: {\n      oscillator: {\n        type: \"sine\",\n        modulationType: \"sine\",\n        modulationIndex: 0.2,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 1.5,\n        decay: 0.5,\n        sustain: 0.4,\n        release: 2\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 800,\n        rolloff: -24,\n        Q: 0.5\n      },\n      volume: -12\n    },\n    effects: [{\n      type: \"compressor\",\n      threshold: -24,\n      ratio: 4,\n      attack: 0.1,\n      release: 0.2\n    }, {\n      type: \"eq3\",\n      low: 2,\n      mid: -4,\n      high: -8,\n      lowFrequency: 200,\n      highFrequency: 2000\n    }]\n  },\n  'Electric': {\n    type: 'synth',\n    settings: {\n      oscillator: {\n        type: \"sawtooth\",\n        modulationType: \"square\",\n        modulationIndex: 0.3,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 0.1,\n        decay: 0.3,\n        sustain: 0.3,\n        release: 1\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 600,\n        rolloff: -24,\n        Q: 1\n      },\n      filterEnvelope: {\n        attack: 0.2,\n        decay: 0.3,\n        sustain: 0.4,\n        release: 1,\n        baseFrequency: 200,\n        octaves: 1.5\n      },\n      volume: -10\n    },\n    effects: [{\n      type: \"compressor\",\n      threshold: -20,\n      ratio: 6,\n      attack: 0.1,\n      release: 0.2\n    }, {\n      type: \"eq3\",\n      low: 4,\n      mid: -2,\n      high: -6,\n      lowFrequency: 150,\n      highFrequency: 1500\n    }]\n  },\n  'Synth': {\n    type: 'synth',\n    settings: {\n      oscillator: {\n        type: \"triangle\",\n        modulationType: \"sine\",\n        modulationIndex: 0.4,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 0.2,\n        decay: 0.4,\n        sustain: 0.3,\n        release: 1.5\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 400,\n        rolloff: -24,\n        Q: 0.8\n      },\n      filterEnvelope: {\n        attack: 0.2,\n        decay: 0.3,\n        sustain: 0.4,\n        release: 1,\n        baseFrequency: 150,\n        octaves: 2\n      },\n      volume: -8\n    },\n    effects: [{\n      type: \"compressor\",\n      threshold: -18,\n      ratio: 8,\n      attack: 0.1,\n      release: 0.2\n    }, {\n      type: \"eq3\",\n      low: 6,\n      mid: -4,\n      high: -4,\n      lowFrequency: 100,\n      highFrequency: 1000\n    }]\n  },\n  'Pad': {\n    type: 'synth',\n    settings: {\n      oscillator: {\n        type: \"sine\",\n        modulationType: \"sine\",\n        modulationIndex: 0.3,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 2,\n        decay: 1,\n        sustain: 0.6,\n        release: 3\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 500,\n        rolloff: -24,\n        Q: 0.5\n      },\n      filterEnvelope: {\n        attack: 1,\n        decay: 0.5,\n        sustain: 0.3,\n        release: 2,\n        baseFrequency: 200,\n        octaves: 2\n      },\n      volume: -12\n    },\n    effects: [{\n      type: \"compressor\",\n      threshold: -24,\n      ratio: 4,\n      attack: 0.1,\n      release: 0.2\n    }, {\n      type: \"eq3\",\n      low: 4,\n      mid: -2,\n      high: -4,\n      lowFrequency: 200,\n      highFrequency: 2000\n    }]\n  }\n};\n\n// Using MIDI note numbers for preview functionality\nconst chordLibrary = {\n  Cmaj7: [60, 64, 67, 71],\n  // C4, E4, G4, B4\n  Am9: [57, 60, 64, 69],\n  // A3, C4, E4, G4\n  Fmaj7: [53, 57, 60, 64],\n  // F3, A3, C4, E4\n  G13: [55, 59, 62, 67],\n  // G3, B3, D4, E4\n  Dm: [50, 53, 57],\n  // D3, F3, A3\n  Gm: [55, 58, 62],\n  // G3, Bb3, D4\n  Bb: [58, 62, 65],\n  // Bb3, D4, F4\n  A7: [57, 61, 64, 69],\n  // A3, C#4, E4, G4\n  E: [52, 56, 59],\n  // E3, G#3, B3\n  A: [57, 61, 64],\n  // A3, C#4, E4\n  'C#m': [61, 64, 68],\n  // C#4, E4, G#4\n  B: [59, 63, 66],\n  // B3, D#4, F#4\n  'G#m9': [56, 59, 63, 68],\n  // G#3, B3, D#4, F#4\n  Badd9: [59, 63, 66, 71],\n  // B3, D#4, F#4, C#5\n  Emaj9: [52, 56, 59, 66],\n  // E3, G#3, B3, D#4\n  'C#m9': [61, 64, 68, 73],\n  // C#4, E4, G#4, B4\n  Dmaj9: [50, 54, 57, 64],\n  // D3, F#3, A3, E4\n  Bm7: [59, 62, 66, 69],\n  // B3, D4, F#4, A4\n  Gmaj7: [55, 59, 62, 66],\n  // G3, B3, D4, F#4\n  Em9: [52, 55, 59, 64],\n  // E3, G3, B3, D4\n  Dm7: [50, 53, 57, 60],\n  // D3, F3, A3, C4\n  G7: [55, 59, 62, 65],\n  // G3, B3, D4, F4\n  D7: [50, 54, 57, 60],\n  // D3, F#3, A3, C4\n  E7: [52, 56, 59, 62],\n  // E3, G#3, B3, D4\n  'F#m7': [54, 57, 61, 64],\n  // F#3, A3, C#4, E4\n  Bmaj7: [59, 63, 66, 70],\n  // B3, D#4, F#4, A#4\n  Amaj7: [57, 61, 64, 68],\n  // A3, C#4, E4, G#4\n  Fmaj7: [53, 57, 60, 64],\n  // F3, A3, C4, E4\n  Dm7: [50, 53, 57, 60],\n  // D3, F3, A3, C4\n  Bb7: [58, 62, 65, 68],\n  // Bb3, D4, F4, Ab4\n  C7: [60, 64, 67, 70] // C4, E4, G4, Bb4\n};\nfunction App() {\n  _s();\n  const [mood, setMood] = useState('Dreamy');\n  const [instrument, setInstrument] = useState('Grand Piano');\n  const [synth, setSynth] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progressionIndex, setProgressionIndex] = useState(0);\n  useEffect(() => {\n    const setupInstrument = async () => {\n      if (synth) {\n        synth.dispose();\n      }\n      const currentInstrument = instruments[instrument];\n      let newSynth;\n      if (currentInstrument.type === 'sampler') {\n        newSynth = new Tone.Sampler(currentInstrument.settings);\n      } else {\n        newSynth = new Tone.PolySynth(Tone.Synth, currentInstrument.settings);\n      }\n\n      // Create reverb\n      const reverb = new Tone.Reverb({\n        decay: 2.5,\n        wet: 0.3\n      }).toDestination();\n\n      // Create effects chain\n      const effects = [];\n      if (currentInstrument.effects) {\n        currentInstrument.effects.forEach(effect => {\n          let effectNode;\n          switch (effect.type) {\n            case \"compressor\":\n              effectNode = new Tone.Compressor(effect);\n              break;\n            case \"eq3\":\n              effectNode = new Tone.EQ3(effect);\n              break;\n          }\n          if (effectNode) {\n            effects.push(effectNode);\n          }\n        });\n      }\n\n      // Connect the chain: synth -> effects -> reverb -> destination\n      let lastNode = newSynth;\n      effects.forEach(effect => {\n        lastNode.connect(effect);\n        lastNode = effect;\n      });\n      lastNode.connect(reverb);\n      setSynth(newSynth);\n      return () => {\n        newSynth.dispose();\n        reverb.dispose();\n        effects.forEach(effect => effect.dispose());\n      };\n    };\n    setupInstrument();\n  }, [instrument]);\n  const playProgression = async () => {\n    if (isPlaying) return;\n    setIsPlaying(true);\n    await Tone.start();\n\n    // Clear any existing scheduled events\n    Tone.Transport.cancel();\n\n    // Schedule all chords\n    moods[mood].forEach((chordName, index) => {\n      const time = index; // Each chord starts at its index (in beats)\n\n      // Schedule the chord\n      Tone.Transport.scheduleOnce(() => {\n        const notes = chordLibrary[chordName] || [];\n\n        // Convert MIDI numbers to note names\n        const noteNames = notes.map(note => {\n          const octave = Math.floor(note / 12) - 1;\n          const noteNames = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n          const noteName = noteNames[note % 12];\n          return `${noteName}${octave}`;\n        });\n        if (noteNames.length > 0) {\n          // Get the root note (first note of the chord) and play it an octave lower\n          const rootNote = noteNames[0];\n          const bassNote = rootNote.replace(/\\d+/, match => parseInt(match) - 1);\n\n          // Play the bass note with lower velocity for subtlety\n          synth.triggerAttackRelease(bassNote, \"1n\", Tone.now(), 0.5);\n\n          // Play the full chord\n          synth.triggerAttackRelease(noteNames, \"1n\");\n        }\n      }, time);\n    });\n\n    // Start the transport\n    Tone.Transport.start();\n\n    // Stop after all chords have played\n    const totalDuration = moods[mood].length;\n    setTimeout(() => {\n      Tone.Transport.stop();\n      setIsPlaying(false);\n    }, totalDuration * 1000);\n  };\n  const generateMidi = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/generate-midi', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          mood: mood,\n          chords: moods[mood]\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Failed to generate MIDI');\n      }\n      const data = await response.json();\n\n      // Convert the data directly to a blob since it's already in the correct format\n      const byteArray = new Uint8Array(data.data);\n      const blob = new Blob([byteArray], {\n        type: 'audio/midi'\n      });\n\n      // Save the file\n      saveAs(blob, data.filename);\n    } catch (error) {\n      console.error('Error generating MIDI:', error);\n      alert('Failed to generate MIDI file. Please make sure the backend server is running.');\n    }\n  };\n  useEffect(() => {\n    const handleKeyPress = e => {\n      // Spacebar for play\n      if (e.code === 'Space') {\n        e.preventDefault();\n        playProgression();\n      }\n\n      // Ctrl+Enter for download\n      if (e.ctrlKey && e.code === 'Enter') {\n        e.preventDefault();\n        generateMidi();\n      }\n\n      // Mood navigation (J/K)\n      if (!e.ctrlKey) {\n        const moodKeys = Object.keys(moods);\n        const currentMoodIndex = moodKeys.indexOf(mood);\n        switch (e.code) {\n          case 'KeyJ':\n            e.preventDefault();\n            setMood(moodKeys[(currentMoodIndex - 1 + moodKeys.length) % moodKeys.length]);\n            break;\n          case 'KeyK':\n            e.preventDefault();\n            setMood(moodKeys[(currentMoodIndex + 1) % moodKeys.length]);\n            break;\n        }\n      }\n\n      // Sound navigation (D/F)\n      if (!e.ctrlKey) {\n        const instrumentKeys = Object.keys(instruments);\n        const currentInstrumentIndex = instrumentKeys.indexOf(instrument);\n        switch (e.code) {\n          case 'KeyD':\n            e.preventDefault();\n            setInstrument(instrumentKeys[(currentInstrumentIndex - 1 + instrumentKeys.length) % instrumentKeys.length]);\n            break;\n          case 'KeyF':\n            e.preventDefault();\n            setInstrument(instrumentKeys[(currentInstrumentIndex + 1) % instrumentKeys.length]);\n            break;\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [isPlaying, playProgression, mood, instrument, generateMidi]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"title-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"title\",\n        children: \"Kraft Kord\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-icon\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-symbols-outlined\",\n          children: \"info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shortcuts-tooltip\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Keyboard Shortcuts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Space: Play preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"J/K: Previous/Next mood\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"D/F: Previous/Next sound\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Ctrl+Enter: Download MIDI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"palette-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Mood\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"palette\",\n        children: Object.keys(moods).map(m => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mood-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `palette-item ${mood === m ? 'active' : ''}`,\n            onClick: () => {\n              setMood(m);\n              setProgressionIndex(0);\n            },\n            children: m\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 15\n          }, this), mood === m && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progression-selector\",\n            children: moods[m].map((_, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `progression-button ${progressionIndex === index ? 'active' : ''}`,\n              onClick: () => setProgressionIndex(index),\n              disabled: isPlaying,\n              children: index + 1\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 17\n          }, this)]\n        }, m, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"palette-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Sound\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"palette\",\n        children: Object.keys(instruments).map(i => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `palette-item ${instrument === i ? 'active' : ''}`,\n          onClick: () => setInstrument(i),\n          children: i\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `play-button ${isPlaying ? 'inactive' : ''}`,\n        onClick: playProgression,\n        disabled: isPlaying,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-symbols-outlined\",\n          children: \"hearing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"download-button\",\n        onClick: generateMidi,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-symbols-outlined\",\n          children: \"file_download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 504,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"t3QdSodbZWfPcftyV/l8f7yLfsg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","saveAs","Tone","jsxDEV","_jsxDEV","moods","Dreamy","Sad","Energetic","instruments","type","settings","urls","A0","C1","A1","C2","A2","C3","A3","C4","A4","C5","A5","C6","A6","C7","A7","C8","release","baseUrl","oscillator","modulationType","modulationIndex","harmonicity","envelope","attack","decay","sustain","filter","frequency","rolloff","Q","volume","effects","threshold","ratio","low","mid","high","lowFrequency","highFrequency","filterEnvelope","baseFrequency","octaves","chordLibrary","Cmaj7","Am9","Fmaj7","G13","Dm","Gm","Bb","E","A","B","Badd9","Emaj9","Dmaj9","Bm7","Gmaj7","Em9","Dm7","G7","D7","E7","Bmaj7","Amaj7","Bb7","App","_s","mood","setMood","instrument","setInstrument","synth","setSynth","isPlaying","setIsPlaying","progressionIndex","setProgressionIndex","setupInstrument","dispose","currentInstrument","newSynth","Sampler","PolySynth","Synth","reverb","Reverb","wet","toDestination","forEach","effect","effectNode","Compressor","EQ3","push","lastNode","connect","playProgression","start","Transport","cancel","chordName","index","time","scheduleOnce","notes","noteNames","map","note","octave","Math","floor","noteName","length","rootNote","bassNote","replace","match","parseInt","triggerAttackRelease","now","totalDuration","setTimeout","stop","generateMidi","response","fetch","method","headers","body","JSON","stringify","chords","ok","Error","data","json","byteArray","Uint8Array","blob","Blob","filename","error","console","alert","handleKeyPress","e","code","preventDefault","ctrlKey","moodKeys","Object","keys","currentMoodIndex","indexOf","instrumentKeys","currentInstrumentIndex","window","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","m","onClick","_","disabled","i","_c","$RefreshReg$"],"sources":["/home/swar/projects/kraftKord/kraft-kord/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { saveAs } from 'file-saver';\nimport * as Tone from 'tone';\nimport './App.css';\n\nconst moods = {\n  Dreamy: [\n    ['Cmaj7', 'Am9', 'Fmaj7', 'G13'],\n    ['Dmaj9', 'Bm7', 'Gmaj7', 'Em9'],\n    ['Fmaj7', 'Dm7', 'Bb7', 'C7']\n  ],\n  Sad: [\n    ['Dm', 'Gm', 'Bb', 'A7'],\n    ['Em', 'Am', 'C', 'G'],\n    ['Bm', 'F#m', 'G', 'A']\n  ],\n  Energetic: [\n    ['E', 'A', 'C#m', 'B'],\n    ['G', 'C', 'D', 'Em'],\n    ['A', 'D', 'E', 'F#m']\n  ],\n  'Deep House': [\n    ['G#m9', 'Badd9', 'Emaj9', 'C#m9'],\n    ['F#m7', 'Bmaj7', 'E7', 'Amaj7'],\n    ['Dm7', 'G7', 'Cmaj7', 'A7']\n  ],\n  'Ambient': [\n    ['Dmaj9', 'Bm7', 'Gmaj7', 'Em9'],\n    ['Am7', 'Dm7', 'Gmaj7', 'Cmaj7'],\n    ['Em9', 'Bm7', 'Amaj7', 'F#m7']\n  ],\n  'Jazz': [\n    ['Dm7', 'G7', 'Cmaj7', 'A7'],\n    ['Em7', 'A7', 'Dmaj7', 'B7'],\n    ['Fm7', 'Bb7', 'Ebmaj7', 'C7']\n  ],\n  'Blues': [\n    ['A7', 'D7', 'E7', 'A7'],\n    ['C7', 'F7', 'G7', 'C7'],\n    ['E7', 'A7', 'B7', 'E7']\n  ],\n  'Cinematic': [\n    ['Em', 'C', 'G', 'D'],\n    ['Am', 'F', 'C', 'G'],\n    ['Dm', 'Bb', 'F', 'C']\n  ],\n  'Lo-Fi': [\n    ['Fmaj7', 'Dm7', 'Bb7', 'C7'],\n    ['Am7', 'Fmaj7', 'Dm7', 'E7'],\n    ['Gmaj7', 'Em7', 'Am7', 'D7']\n  ],\n  'Neo-Soul': [\n    ['F#m7', 'Bmaj7', 'E7', 'Amaj7'],\n    ['Dm7', 'G7', 'Cmaj7', 'Fmaj7'],\n    ['Am7', 'D7', 'Gmaj7', 'C7']\n  ]\n};\n\nconst instruments = {\n  'Grand Piano': {\n    type: 'sampler',\n    settings: {\n      urls: {\n        A0: \"A0.mp3\", C1: \"C1.mp3\", \"D#1\": \"Ds1.mp3\", \"F#1\": \"Fs1.mp3\",\n        A1: \"A1.mp3\", C2: \"C2.mp3\", \"D#2\": \"Ds2.mp3\", \"F#2\": \"Fs2.mp3\",\n        A2: \"A2.mp3\", C3: \"C3.mp3\", \"D#3\": \"Ds3.mp3\", \"F#3\": \"Fs3.mp3\",\n        A3: \"A3.mp3\", C4: \"C4.mp3\", \"D#4\": \"Ds4.mp3\", \"F#4\": \"Fs4.mp3\",\n        A4: \"A4.mp3\", C5: \"C5.mp3\", \"D#5\": \"Ds5.mp3\", \"F#5\": \"Fs5.mp3\",\n        A5: \"A5.mp3\", C6: \"C6.mp3\", \"D#6\": \"Ds6.mp3\", \"F#6\": \"Fs6.mp3\",\n        A6: \"A6.mp3\", C7: \"C7.mp3\", \"D#7\": \"Ds7.mp3\", \"F#7\": \"Fs7.mp3\",\n        A7: \"A7.mp3\", C8: \"C8.mp3\"\n      },\n      release: 1,\n      baseUrl: \"https://tonejs.github.io/audio/salamander/\"\n    }\n  },\n  'Strings': {\n    type: 'synth',\n    settings: {\n      oscillator: { \n        type: \"sine\",\n        modulationType: \"sine\",\n        modulationIndex: 0.2,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 1.5,\n        decay: 0.5,\n        sustain: 0.4,\n        release: 2\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 800,\n        rolloff: -24,\n        Q: 0.5\n      },\n      volume: -12\n    },\n    effects: [\n      {\n        type: \"compressor\",\n        threshold: -24,\n        ratio: 4,\n        attack: 0.1,\n        release: 0.2\n      },\n      {\n        type: \"eq3\",\n        low: 2,\n        mid: -4,\n        high: -8,\n        lowFrequency: 200,\n        highFrequency: 2000\n      }\n    ]\n  },\n  'Electric': {\n    type: 'synth',\n    settings: {\n      oscillator: { \n        type: \"sawtooth\",\n        modulationType: \"square\",\n        modulationIndex: 0.3,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 0.1,\n        decay: 0.3,\n        sustain: 0.3,\n        release: 1\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 600,\n        rolloff: -24,\n        Q: 1\n      },\n      filterEnvelope: {\n        attack: 0.2,\n        decay: 0.3,\n        sustain: 0.4,\n        release: 1,\n        baseFrequency: 200,\n        octaves: 1.5\n      },\n      volume: -10\n    },\n    effects: [\n      {\n        type: \"compressor\",\n        threshold: -20,\n        ratio: 6,\n        attack: 0.1,\n        release: 0.2\n      },\n      {\n        type: \"eq3\",\n        low: 4,\n        mid: -2,\n        high: -6,\n        lowFrequency: 150,\n        highFrequency: 1500\n      }\n    ]\n  },\n  'Synth': {\n    type: 'synth',\n    settings: {\n      oscillator: { \n        type: \"triangle\",\n        modulationType: \"sine\",\n        modulationIndex: 0.4,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 0.2,\n        decay: 0.4,\n        sustain: 0.3,\n        release: 1.5\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 400,\n        rolloff: -24,\n        Q: 0.8\n      },\n      filterEnvelope: {\n        attack: 0.2,\n        decay: 0.3,\n        sustain: 0.4,\n        release: 1,\n        baseFrequency: 150,\n        octaves: 2\n      },\n      volume: -8\n    },\n    effects: [\n      {\n        type: \"compressor\",\n        threshold: -18,\n        ratio: 8,\n        attack: 0.1,\n        release: 0.2\n      },\n      {\n        type: \"eq3\",\n        low: 6,\n        mid: -4,\n        high: -4,\n        lowFrequency: 100,\n        highFrequency: 1000\n      }\n    ]\n  },\n  'Pad': {\n    type: 'synth',\n    settings: {\n      oscillator: { \n        type: \"sine\",\n        modulationType: \"sine\",\n        modulationIndex: 0.3,\n        harmonicity: 0.5\n      },\n      envelope: {\n        attack: 2,\n        decay: 1,\n        sustain: 0.6,\n        release: 3\n      },\n      filter: {\n        type: \"lowpass\",\n        frequency: 500,\n        rolloff: -24,\n        Q: 0.5\n      },\n      filterEnvelope: {\n        attack: 1,\n        decay: 0.5,\n        sustain: 0.3,\n        release: 2,\n        baseFrequency: 200,\n        octaves: 2\n      },\n      volume: -12\n    },\n    effects: [\n      {\n        type: \"compressor\",\n        threshold: -24,\n        ratio: 4,\n        attack: 0.1,\n        release: 0.2\n      },\n      {\n        type: \"eq3\",\n        low: 4,\n        mid: -2,\n        high: -4,\n        lowFrequency: 200,\n        highFrequency: 2000\n      }\n    ]\n  }\n};\n\n// Using MIDI note numbers for preview functionality\nconst chordLibrary = {\n  Cmaj7: [60, 64, 67, 71],  // C4, E4, G4, B4\n  Am9: [57, 60, 64, 69],    // A3, C4, E4, G4\n  Fmaj7: [53, 57, 60, 64],  // F3, A3, C4, E4\n  G13: [55, 59, 62, 67],    // G3, B3, D4, E4\n  Dm: [50, 53, 57],         // D3, F3, A3\n  Gm: [55, 58, 62],         // G3, Bb3, D4\n  Bb: [58, 62, 65],         // Bb3, D4, F4\n  A7: [57, 61, 64, 69],     // A3, C#4, E4, G4\n  E: [52, 56, 59],          // E3, G#3, B3\n  A: [57, 61, 64],          // A3, C#4, E4\n  'C#m': [61, 64, 68],      // C#4, E4, G#4\n  B: [59, 63, 66],          // B3, D#4, F#4\n  'G#m9': [56, 59, 63, 68], // G#3, B3, D#4, F#4\n  Badd9: [59, 63, 66, 71],  // B3, D#4, F#4, C#5\n  Emaj9: [52, 56, 59, 66],  // E3, G#3, B3, D#4\n  'C#m9': [61, 64, 68, 73], // C#4, E4, G#4, B4\n  Dmaj9: [50, 54, 57, 64],  // D3, F#3, A3, E4\n  Bm7: [59, 62, 66, 69],    // B3, D4, F#4, A4\n  Gmaj7: [55, 59, 62, 66],  // G3, B3, D4, F#4\n  Em9: [52, 55, 59, 64],    // E3, G3, B3, D4\n  Dm7: [50, 53, 57, 60],    // D3, F3, A3, C4\n  G7: [55, 59, 62, 65],     // G3, B3, D4, F4\n  D7: [50, 54, 57, 60],     // D3, F#3, A3, C4\n  E7: [52, 56, 59, 62],     // E3, G#3, B3, D4\n  'F#m7': [54, 57, 61, 64],   // F#3, A3, C#4, E4\n  Bmaj7: [59, 63, 66, 70],  // B3, D#4, F#4, A#4\n  Amaj7: [57, 61, 64, 68],  // A3, C#4, E4, G#4\n  Fmaj7: [53, 57, 60, 64],  // F3, A3, C4, E4\n  Dm7: [50, 53, 57, 60],    // D3, F3, A3, C4\n  Bb7: [58, 62, 65, 68],    // Bb3, D4, F4, Ab4\n  C7: [60, 64, 67, 70]      // C4, E4, G4, Bb4\n};\n\nfunction App() {\n  const [mood, setMood] = useState('Dreamy');\n  const [instrument, setInstrument] = useState('Grand Piano');\n  const [synth, setSynth] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progressionIndex, setProgressionIndex] = useState(0);\n\n  useEffect(() => {\n    const setupInstrument = async () => {\n      if (synth) {\n        synth.dispose();\n      }\n\n      const currentInstrument = instruments[instrument];\n      let newSynth;\n\n      if (currentInstrument.type === 'sampler') {\n        newSynth = new Tone.Sampler(currentInstrument.settings);\n      } else {\n        newSynth = new Tone.PolySynth(Tone.Synth, currentInstrument.settings);\n      }\n\n      // Create reverb\n      const reverb = new Tone.Reverb({\n        decay: 2.5,\n        wet: 0.3\n      }).toDestination();\n\n      // Create effects chain\n      const effects = [];\n      if (currentInstrument.effects) {\n        currentInstrument.effects.forEach(effect => {\n          let effectNode;\n          switch (effect.type) {\n            case \"compressor\":\n              effectNode = new Tone.Compressor(effect);\n              break;\n            case \"eq3\":\n              effectNode = new Tone.EQ3(effect);\n              break;\n          }\n          if (effectNode) {\n            effects.push(effectNode);\n          }\n        });\n      }\n\n      // Connect the chain: synth -> effects -> reverb -> destination\n      let lastNode = newSynth;\n      effects.forEach(effect => {\n        lastNode.connect(effect);\n        lastNode = effect;\n      });\n      lastNode.connect(reverb);\n\n      setSynth(newSynth);\n\n      return () => {\n        newSynth.dispose();\n        reverb.dispose();\n        effects.forEach(effect => effect.dispose());\n      };\n    };\n\n    setupInstrument();\n  }, [instrument]);\n\n  const playProgression = async () => {\n    if (isPlaying) return;\n    \n    setIsPlaying(true);\n    await Tone.start();\n    \n    // Clear any existing scheduled events\n    Tone.Transport.cancel();\n    \n    // Schedule all chords\n    moods[mood].forEach((chordName, index) => {\n      const time = index; // Each chord starts at its index (in beats)\n      \n      // Schedule the chord\n      Tone.Transport.scheduleOnce(() => {\n        const notes = chordLibrary[chordName] || [];\n        \n        // Convert MIDI numbers to note names\n        const noteNames = notes.map(note => {\n          const octave = Math.floor(note / 12) - 1;\n          const noteNames = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n          const noteName = noteNames[note % 12];\n          return `${noteName}${octave}`;\n        });\n        \n        if (noteNames.length > 0) {\n          // Get the root note (first note of the chord) and play it an octave lower\n          const rootNote = noteNames[0];\n          const bassNote = rootNote.replace(/\\d+/, (match) => parseInt(match) - 1);\n          \n          // Play the bass note with lower velocity for subtlety\n          synth.triggerAttackRelease(bassNote, \"1n\", Tone.now(), 0.5);\n          \n          // Play the full chord\n          synth.triggerAttackRelease(noteNames, \"1n\");\n        }\n      }, time);\n    });\n    \n    // Start the transport\n    Tone.Transport.start();\n    \n    // Stop after all chords have played\n    const totalDuration = moods[mood].length;\n    setTimeout(() => {\n      Tone.Transport.stop();\n      setIsPlaying(false);\n    }, totalDuration * 1000);\n  };\n\n  const generateMidi = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/generate-midi', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          mood: mood,\n          chords: moods[mood]\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to generate MIDI');\n      }\n\n      const data = await response.json();\n      \n      // Convert the data directly to a blob since it's already in the correct format\n      const byteArray = new Uint8Array(data.data);\n      const blob = new Blob([byteArray], { type: 'audio/midi' });\n      \n      // Save the file\n      saveAs(blob, data.filename);\n    } catch (error) {\n      console.error('Error generating MIDI:', error);\n      alert('Failed to generate MIDI file. Please make sure the backend server is running.');\n    }\n  };\n\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      // Spacebar for play\n      if (e.code === 'Space') {\n        e.preventDefault();\n        playProgression();\n      }\n      \n      // Ctrl+Enter for download\n      if (e.ctrlKey && e.code === 'Enter') {\n        e.preventDefault();\n        generateMidi();\n      }\n\n      // Mood navigation (J/K)\n      if (!e.ctrlKey) {\n        const moodKeys = Object.keys(moods);\n        const currentMoodIndex = moodKeys.indexOf(mood);\n        \n        switch(e.code) {\n          case 'KeyJ':\n            e.preventDefault();\n            setMood(moodKeys[(currentMoodIndex - 1 + moodKeys.length) % moodKeys.length]);\n            break;\n          case 'KeyK':\n            e.preventDefault();\n            setMood(moodKeys[(currentMoodIndex + 1) % moodKeys.length]);\n            break;\n        }\n      }\n\n      // Sound navigation (D/F)\n      if (!e.ctrlKey) {\n        const instrumentKeys = Object.keys(instruments);\n        const currentInstrumentIndex = instrumentKeys.indexOf(instrument);\n        \n        switch(e.code) {\n          case 'KeyD':\n            e.preventDefault();\n            setInstrument(instrumentKeys[(currentInstrumentIndex - 1 + instrumentKeys.length) % instrumentKeys.length]);\n            break;\n          case 'KeyF':\n            e.preventDefault();\n            setInstrument(instrumentKeys[(currentInstrumentIndex + 1) % instrumentKeys.length]);\n            break;\n        }\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [isPlaying, playProgression, mood, instrument, generateMidi]);\n\n  return (\n    <div className=\"app-container\">\n      <div className=\"title-container\">\n        <h1 className=\"title\">Kraft Kord</h1>\n        <div className=\"info-icon\">\n          <span className=\"material-symbols-outlined\">info</span>\n          <div className=\"shortcuts-tooltip\">\n            <h3>Keyboard Shortcuts</h3>\n            <ul>\n              <li>Space: Play preview</li>\n              <li>J/K: Previous/Next mood</li>\n              <li>D/F: Previous/Next sound</li>\n              <li>Ctrl+Enter: Download MIDI</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"palette-container\">\n        <h2>Mood</h2>\n        <div className=\"palette\">\n          {Object.keys(moods).map(m => (\n            <div key={m} className=\"mood-item\">\n              <button\n                className={`palette-item ${mood === m ? 'active' : ''}`}\n                onClick={() => {\n                  setMood(m);\n                  setProgressionIndex(0);\n                }}\n              >\n                {m}\n              </button>\n              {mood === m && (\n                <div className=\"progression-selector\">\n                  {moods[m].map((_, index) => (\n                    <button\n                      key={index}\n                      className={`progression-button ${progressionIndex === index ? 'active' : ''}`}\n                      onClick={() => setProgressionIndex(index)}\n                      disabled={isPlaying}\n                    >\n                      {index + 1}\n                    </button>\n                  ))}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"palette-container\">\n        <h2>Sound</h2>\n        <div className=\"palette\">\n          {Object.keys(instruments).map(i => (\n            <button\n              key={i}\n              className={`palette-item ${instrument === i ? 'active' : ''}`}\n              onClick={() => setInstrument(i)}\n            >\n              {i}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"button-group\">\n        <button \n          className={`play-button ${isPlaying ? 'inactive' : ''}`}\n          onClick={playProgression}\n          disabled={isPlaying}\n        >\n          <span className=\"material-symbols-outlined\">hearing</span>\n        </button>\n        <button \n          className=\"download-button\"\n          onClick={generateMidi}\n        >\n          <span className=\"material-symbols-outlined\">file_download</span>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}